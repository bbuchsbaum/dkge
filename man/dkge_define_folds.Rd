% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dkge-kfold.R
\name{dkge_define_folds}
\alias{dkge_define_folds}
\title{Define folds for K-fold cross-validation}
\usage{
dkge_define_folds(
  fit,
  type = c("subject", "time", "run", "custom"),
  k = 5,
  runs = NULL,
  assignments = NULL,
  seed = NULL,
  align = FALSE,
  ...
)
}
\arguments{
\item{fit}{A `dkge` object or `dkge_data` bundle}

\item{type}{Type of fold definition:
- `"subject"`: Random assignment of subjects to folds (default)
- `"time"`: Split each subject's time series into temporal blocks
- `"run"`: Use experimental runs as natural folds
- `"custom"`: User provides fold assignments directly}

\item{k}{Number of folds (ignored for type="custom")}

\item{runs}{For type="run", a list of run indicators per subject}

\item{assignments}{For type="custom", a list of fold assignments}

\item{seed}{Random seed for reproducible fold assignment}

\item{align}{Logical; if TRUE (default) compute Procrustes alignment/consensus when folds are evaluated.}

\item{...}{Additional arguments for specific fold types}
}
\value{
A `dkge_folds` object containing:
  - `type`: The fold type used
  - `k`: Number of folds
  - `assignments`: List specifying which data belongs to each fold
  - `metadata`: Additional information about fold creation
}
\description{
Create fold assignments for subjects or time points in DKGE analysis.
Supports multiple strategies including random subject-level folds, time-based
splits, run-based partitions, and custom user-defined assignments.
}
\details{
Different fold types serve different purposes:

**Subject-level folds** (`type = "subject"`): Assigns entire subjects to folds.
This maintains subject independence and is appropriate when subjects are
exchangeable. Each fold will have approximately S/k subjects.

**Time-based folds** (`type = "time"`): Splits each subject's time series into
k temporal blocks. Useful for assessing temporal stability or when early vs
late responses differ. Requires access to original time series dimensions.

**Run-based folds** (`type = "run"`): Uses experimental runs as natural folds.
Common in fMRI where runs provide natural breaks. Requires run indicators.

**Custom folds** (`type = "custom"`): Full control over fold assignments.
Supply a list where each element specifies indices for that fold.
}
\examples{
\dontrun{
# Random subject-level 5-fold
folds <- dkge_define_folds(fit, type = "subject", k = 5)

# Time-based 3-fold (early, middle, late)
folds <- dkge_define_folds(fit, type = "time", k = 3)

# Run-based using experimental structure
run_list <- list(sub1 = c(1,1,2,2,3,3), sub2 = c(1,1,2,2,3,3))
folds <- dkge_define_folds(fit, type = "run", runs = run_list)

# Custom fold specification
folds <- dkge_define_folds(fit, type = "custom",
  assignments = list(fold1 = 1:10, fold2 = 11:20, fold3 = 21:30))
}

}
